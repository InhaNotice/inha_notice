# Inha Notice Test Skill

## 목적
- 인하공지 프로젝트에서 테스트 작업을 일관된 절차로 수행하기 위한 실행 스킬
- `Agent` 문서(정책)와 분리하여, 실제 작업 순서와 명령 중심으로 정의
- 기본 언어는 한국어(테스트명/그룹명)

## 적용 범위
- Unit Test
- Widget(UI) Test
- Integration Test
- 테스트 가능성을 높이기 위한 최소 리팩토링

## 실행 절차
1. 대상 확인
- 현재 task 번호 및 범위 확인
- 대상 feature의 `lib/...` 파일과 기존 `test/...` 파일 확인
- 대상 파일의 public behavior 목록화

2. 구조 점검
- 클린 아키텍처 + BLoC 위반 여부 점검
- 위반 시 비즈니스 로직 변경 없이 최소 리팩토링

3. 테스트 작성
- `lib/...` 경로를 `test/...`로 1:1 매핑
- 테스트명/그룹명은 한국어 기본
- 성공/실패/엣지 케이스 포함
- 리포지토리/스토리지 값, 상태 변화, 부수효과를 함께 검증

4. 검증
- 타깃 테스트 우선 실행
- 통과 후 전체 테스트 회귀 실행

5. 보고
- 변경 파일
- 핵심 검증 포인트
- 실행 명령
- 결과 및 남은 리스크

## 리팩토링 규칙
- 허용:
  - 의존성 주입 포인트 추가
  - 전역/static 결합 완화
  - 테스트 더블 주입 가능한 생성자/팩토리 도입
- 금지:
  - 비즈니스 로직/정책 변경
  - 사용자 동작 변경

## 테스트 작성 규칙
- 테스트는 독립 실행 가능해야 함(순서 의존 금지)
- 가능한 경우 패키지 공식 테스트 API 우선 사용
  - 예: `SharedPreferences.setMockInitialValues(...)`
- 공식 API가 없을 때만 `mocktail`/`mockito` 사용
- mock/fake는 최소 범위로 사용(구현 세부 과도 모킹 금지)
- flaky 테스트 금지
- 고정 입력 사용(시간/네트워크 의존 최소화)
- 테스트마다 공유 상태 초기화/재설정

## 권장 명령어
- 타깃:
  - `flutter test --no-test-assets test/<target>`
- 전체 회귀:
  - `flutter test --no-test-assets test`

## 실패 대응
1. 실패 원인 분류(테스트 코드/프로덕션 코드/환경)
2. 최소 수정
3. 타깃 재실행
4. 전체 회귀 재실행

## UI 테스트 확장 규칙
- Widget Test 우선, Integration Test는 핵심 여정만
- 상태 기반 렌더링 + 사용자 이벤트 반영 중심 검증
- 골든 테스트는 디자인 안정 화면부터 적용

## 단위 테스트 체크리스트
- 테스트 파일 경로가 `test/...`에 올바르게 매핑되었는가
- 한국어 테스트명/그룹명을 사용했는가
- 패키지 공식 테스트 API를 우선 적용했는가
- 반환값 + 상태/저장소 반영을 함께 검증했는가
- 실행 명령과 통과/실패 결과를 보고에 포함했는가
